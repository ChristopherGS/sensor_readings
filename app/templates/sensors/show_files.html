<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
    <h1 class="text-center">Experiments currently in the database</h1>

    <ul class="db_item_container">

    {% for index, label in db_data %}

            <li class="db_item"><a id="link{{index}}"class="db_item_link" href="{{ url_for('sensors.display')}}/{{index}}">{{label}}</a></li>
            {% if label != "unknown" %}
                <button data-id={{index}} class="upload_label">Update label</button>
            {% else %}
                <button data-id={{index}} class="upload_label">Add label</button>
            {% endif %}

    {% endfor %}

    </ul>

    <br>

    <hr>

    <h1>CSV files on the server</h1>

    <ul>
    {% for f in file_url %}
    	<li>{{f}}</li>

    {% endfor %}

    </ul>

<script type="text/javascript">
        $(document).ready(function(){
            $(".upload_label").on("click", function(e){
                var name = prompt("Enter the new label");
                var id = $(this).data('id');
                $.post("{{ url_for('sensors.display')}}", {
                    label: name,
                    time: new Date(),
                    id: id
                }, function(data){
                    id_string = "#link"+id;
                    $(id_string).text(data);
                });
            });
        });

</script>

    
{% endblock %}
